function Chatbox(e){function t(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var s=o[n];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}var o=this;this.history=[],this.placeholder="Please log in to chat",this.botName="BBot",this.ioConnString="http://localhost:5000",this.lastMsgUsr="",this.chatMsg="",this.getUser=function(){return t("user")},this.scope=e,e.$watch("loggedIn",function(e){e&&o.connect()}),this.connect=function(){function t(t,s){if(o.lastMsgUsr==t){var c=n.length;n[c-1].messages.push(s)}else o.lastMsgUsr=t,n.push({user:t,messages:[s]});e.$apply()}var n=this.history,s=this.botName;this.socket=io().connect(this.ioConnString,{query:"session_id="+this.getUser(),timeout:36e5}),this.socket.on("chat",function(e){console.log("chattin"),t(e.user,e.msg)}),this.socket.on("conn",function(e){console.log("connected user:",e);var o=e+" has joined.";t(s,o)}),this.socket.on("dc",function(e){var o=e+" has left.";t(s,o)}),this.socket.on("advance",function(){console.log("advance recieved")})}}function ManagementController(e,t){var o=this;o.users=[],o.roles=["admin","host","dj","listener"],o.http=t,this.getUsers=function(){this.http.get("/users/all").then(function(e){o.users=e.data})},this.changeRole=function(e){console.log(e),t.post("/users/role",e).then(function(){o.getUsers()})},this.getUsers()}var app=angular.module("myApp",["ngAnimate","ngCookies","luegg.directives"]);app.controller("ChatboxController",["$scope",Chatbox]),Chatbox.prototype.sendChat=function(){return this.socket.connected||this.connect(),this.socket.emit("chat",this.chatMsg),this.chatMsg="",!1},app.controller("IndexController",["$scope","$http","$cookies",function($scope,$http,$cookies){function getMenuBtns(){$scope.menuBtns=[],$http.get("/menuBtns").then(function(e){for(var t=0;t<e.data.length;t++)$scope.menuBtns.push(new MenuBtn(e.data[t]))},function(e){401==e.status&&($scope.loggedIn=!1,$scope.menuBtns=[{icon:"sign-in",title:"Log In",action:function(){$scope.loggingIn=!0},area:"left"}])})}function setAlert(e,t){$scope.alert.message=e,$scope.alert.status=t,setTimeout(function(){$scope.alert.status="",$scope.alert.message="",$scope.$apply()},3e3)}function checkPass(){var e=$scope.acct.password;return $scope.acct.upper=/[A-Z]+/.test(e),$scope.acct.lower=/[a-z]+/.test(e),$scope.acct.num=/[0-9]+/.test(e),$scope.acct.special=/[!@#$%^(){}[\]~\-_:]+/.test(e),$scope.acct.length=e.length>=8,$scope.acct.upper&&$scope.acct.lower&&$scope.acct.num&&$scope.acct.special&&$scope.acct.length}function advanceSong(){$http.get("/queue/next").then(function(e){SC.get("/tracks/"+e.data.id).then(function(t){(e.data="No song queued")&&(t=defTrack),$scope.playSound(t,e.data.curTime)})}),$scope.getQueue()}function checkSong(){$http.get("/queue/next").then(function(e){e.data.id!=$scope.curSong.id&&$scope.curSong.id!=defTrack.id&&advanceSong()})}function MenuBtn(btn){this.icon=btn.icon,this.title=btn.title;var action=btn.action;this.action=function(){eval(action)},this.area=btn.area}$scope.itworks="Hello!",$scope.menuBtns=[],$scope.newSong="kid-cudi",$scope.curSong={id:"No Song Playing"},$scope.history=[],$scope.loggingIn=!1,$scope.alert={status:"",message:""},$scope.acct={role:"listener",username:"",password:""};var pass=$scope.acct.password;$scope.acct.upper=/[A-Z]+/.test(pass),$scope.acct.lower=/[a-z]+/.test(pass),$scope.acct.num=/[0-9]+/.test(pass),$scope.acct.special=/[!@#$%^(){}[\]~\-_]+/.test(pass),$scope.historyOpen=!1,$scope.searchOpen=!1,$scope.mgmtOpen=!1,$scope.showDev=!1,$scope.songProgressStyle={},$scope.songProgress=0;var songProgressInterval;$scope.Math=Math,$scope.SCResults=[],$scope.loggedIn=!!$cookies.get("user"),$scope.loggedIn?$scope.chatplaceholder="":$scope.chatplaceholder="Please log in to chat",$scope.songQueue=[];var socket,ioConnString="http://localhost:5000",lastMsgUser="",defTrack={id:146823529,title:"No song queued",duration:1},gPlayer;SC.initialize({client_id:"2f5df4628f89bc06dc6f88789d5eb0ae",redirect_uri:"http://treesradio.net/soundcloud/callback.html"}),$scope.searchSound=function(e){console.log("Searching for song:",e),SC.get("/tracks/",{q:e,streamable:!0}).then(function(e){console.log(e),$scope.SCResults=e,$scope.$apply()})},$scope.toggleHistory=function(){$scope.historyOpen=!$scope.historyOpen},$scope.login=function(){console.log("logging in"),$http.post("/login",$scope.acct).then(function(e){e.data.success&&($scope.loggingIn=!1,setAlert("Thank you for logging in","success"),getMenuBtns(),$scope.loggedIn=!0,$scope.chatplaceholder="")})},$scope.logout=function(){$http.get("/logout").then(function(){$cookies.remove("user"),getMenuBtns()})},$scope.registerAcct=function(){checkPass()?($scope.loggingIn=!1,$http.post("/register",$scope.acct).then(function(e){console.log(e.data),setAlert("Thank you for registering","success"),setTimeout(function(){},3e3),getMenuBtns()})):setAlert("Password must contain: Uppercase letter,Lowercase letter,number,special character","danger")},$scope.playSound=function(e,t){t||(t=0),$scope.songProgressStyle={transition:"all linear 1s",width:"10px"},SC.stream("/tracks/"+e.id).then(function(o){$scope.curSong=e,$scope.history.push(e),clearInterval(songProgressInterval),gPlayer=o,gPlayer.seek(t),gPlayer.play(),setTimeout(function(){$scope.songProgressStyle={transition:"all linear "+e.duration+"ms",width:"100%"},$scope.$apply()},3e3),songProgressInterval=setInterval(function(){$scope.$apply()},1e3)})},$scope.formatTime=function(e){return Math.floor(Math.floor(e/1e3)/60)+":"+("0"+e%60).substring(0,2)},$scope.queueAdd=function(e){console.log("adding track:",e),$http.post("/queue/add",e)},$scope.getQueue=function(){$http.get("/queue").then(function(e){console.log("upcoming queue:"),console.log(e.data),$scope.songQueue=e.data})},$scope.kickoff=function(){$http.get("/queue/kickoff")},$scope.advanceSong=function(){advanceSong()},$scope.skip=function(){console.log("skippin"),$http.get("/queue/skip")},$scope.start=function(){},$scope.$watch("acct.password",function(){checkPass()}),$scope.changeRank=function(e){e.changeRank?e.changeRank=!1:e.changeRank=!0},getMenuBtns(),$scope.getQueue(),setInterval(checkSong,1e3),advanceSong()}]),$(function(){function e(){$(".mainWrapper").height($(window).height()),$("main").height($(".mainWrapper").height()),$(".contentWrapper").height($("main").height()),$(".leftMenu").height($(".mainWrapper").height()),$(".rightSidebar").height($(".mainWrapper").height()),$(".chatbox").height($(".rightSidebar").height()),$("#messageContainer").height($(".chatbox").height()-$(".chatbox").children("form").height()),$(".SCResults").height($(".contentWrapper").height()-85),$(".management").height($(".contentWrapper").height()-85),$(".usergrp").height($(".management").height()),$(".songQueue").height($(".leftMenu").height()-$(".leftBtns").height()-10)}e(),$(window).resize(function(){e()});var t=$("#messageContainer");t[0].scrollTop=t[0].scrollHeight,$(".chatbox").children("form").keyup(function(e){13==e.keyCode&&(t[0].scrollTop=t[0].scrollHeight,$(this).val(""))}).focus()}),app.controller("ManagementController",["$scope","$http",ManagementController]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL0NoYXRib3hDb250cm9sbGVyLnRzIiwiY29udHJvbGxlcnMvTWFuYWdlbWVudENvbnRyb2xsZXIudHMiLCJhcHAudHMiLCJjb250cm9sbGVycy9JbmRleENvbnRyb2xsZXIudHMiLCJqcXVpYmJsZXMudHMiXSwibmFtZXMiOlsiQ2hhdGJveCIsIiRzY29wZSIsIkNoYXRib3gucmVhZENvb2tpZSIsInJlYWRDb29raWUiLCJuZXdWYWwiLCJjYiIsImNvbm5lY3QiLCJwdXNoTWVzc2FnZSIsInVzciIsIm1zZyIsImhpc3QiLCJ0aGlzIiwiaGlzdG9yeSIsImJvdE5hbWUiLCJzb2NrZXQiLCJpbyIsImlvQ29ublN0cmluZyIsInF1ZXJ5IiwiZ2V0VXNlciIsInRpbWVvdXQiLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwibWVzc2FnZSIsIk1hbmFnZW1lbnRDb250cm9sbGVyIiwiJGh0dHAiLCJodHRwIiwiZ2V0IiwidGhlbiIsInJlc3AiLCJtZyIsInVzZXJzIiwiZGF0YSIsInBvc3QiLCJnZXRVc2VycyIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwicHJvdG90eXBlIiwic2VuZENoYXQiLCJjb25uZWN0ZWQiLCJlbWl0IiwiY2hhdE1zZyIsIiRjb29raWVzIiwiZ2V0TWVudUJ0bnMiLCJpIiwibGVuZ3RoIiwibWVudUJ0bnMiLCJwdXNoIiwiTWVudUJ0biIsInN0YXR1cyIsImxvZ2dlZEluIiwiaWNvbiIsInRpdGxlIiwiYWN0aW9uIiwibG9nZ2luZ0luIiwiYXJlYSIsInNldEFsZXJ0IiwiYWxlcnQiLCIkYXBwbHkiLCJjaGVja1Bhc3MiLCJhZHZhbmNlU29uZyIsIlNDIiwiaWQiLCJ0cmFjayIsImRlZlRyYWNrIiwicGxheVNvdW5kIiwiY3VyVGltZSIsImNoZWNrU29uZyIsImN1clNvbmciLCJidG4iLCJldmFsIiwiaXR3b3JrcyIsIm5ld1NvbmciLCJhY2N0Iiwicm9sZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJwYXNzIiwidXBwZXIiLCJ0ZXN0IiwibG93ZXIiLCJudW0iLCJzcGVjaWFsIiwiaGlzdG9yeU9wZW4iLCJzZWFyY2hPcGVuIiwibWdtdE9wZW4iLCJzaG93RGV2Iiwic29uZ1Byb2dyZXNzU3R5bGUiLCJzb25nUHJvZ3Jlc3MiLCJzb25nUHJvZ3Jlc3NJbnRlcnZhbCIsIk1hdGgiLCJTQ1Jlc3VsdHMiLCJjaGF0cGxhY2Vob2xkZXIiLCJzb25nUXVldWUiLCJsYXN0TXNnVXNlciIsImR1cmF0aW9uIiwiZ1BsYXllciIsImluaXRpYWxpemUiLCJjbGllbnRfaWQiLCJyZWRpcmVjdF91cmkiLCJzZWFyY2hTb3VuZCIsInEiLCJzdHJlYW1hYmxlIiwidHJhY2tzIiwidG9nZ2xlSGlzdG9yeSIsImxvZ2luIiwic3VjY2VzcyIsImxvZ291dCIsInJlbW92ZSIsInJlZ2lzdGVyQWNjdCIsInNldFRpbWVvdXQiLCJ0aW1lIiwidHJhbnNpdGlvbiIsIndpZHRoIiwic3RyZWFtIiwicGxheWVyIiwiY2xlYXJJbnRlcnZhbCIsInNlZWsiLCJwbGF5Iiwic2V0SW50ZXJ2YWwiLCJmb3JtYXRUaW1lIiwiZmxvb3IiLCJzdWJzdHJpbmciLCJxdWV1ZUFkZCIsImdldFF1ZXVlIiwia2lja29mZiIsInNraXAiLCJzdGFydCIsIiR3YXRjaCIsImNoYW5nZVJhbmsiLCIkIiwicmVzaXplTWFpbiIsIndpbmRvdyIsInJlc2l6ZSIsIiRjb250Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwiY2hpbGRyZW4iLCJrZXl1cCIsImUiLCJrZXlDb2RlIiwidmFsIiwiZm9jdXMiXSwibWFwcGluZ3MiOiJBQUtBLFFBQUFBLFNBQWlCQyxHQWNiRCxRQUFBQSxHQUFvQkEsR0FHaEJFLElBQUlBLEdBRkFBLEdBQVNBLEVBQU9BLElBQ2hCQSxFQUFLQSxTQUFTQSxPQUFPQSxNQUFNQSxLQUN2QkEsRUFBRUEsRUFBRUEsRUFBSUEsRUFBR0EsT0FBT0EsSUFBS0EsQ0FFM0JBLElBREFBLEdBQUlBLEdBQUlBLEVBQUdBLEdB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QWdCQSxVQUNuQ0EsRUFBRUEsbUJBQW1CQSxPQUFPQSxFQUFFQSxRQUFRQSxVQUN0Q0EsRUFBRUEsYUFBYUEsT0FBT0EsRUFBRUEsZ0JBQWdCQSxVQUN4Q0EsRUFBRUEsaUJBQWlCQSxPQUFPQSxFQUFFQSxnQkFBZ0JBLFVBQzVDQSxFQUFFQSxZQUFZQSxPQUFPQSxFQUFFQSxpQkFBaUJBLFVBQ3hDQSxFQUFFQSxxQkFBcUJBLE9BQU9BLEVBQUVBLFlBQVlBLFNBQVNBLEVBQUVBLFlBQVlBLFNBQVNBLFFBQVFBLFVBQ3BGQSxFQUFFQSxjQUFjQSxPQUFPQSxFQUFFQSxtQkFBbUJBLFNBQVNBLElBQ3JEQSxFQUFFQSxlQUFlQSxPQUFPQSxFQUFFQSxtQkFBbUJBLFNBQVNBLElBQ3REQSxFQUFFQSxZQUFZQSxPQUFPQSxFQUFFQSxlQUFlQSxVQUN0Q0EsRUFBRUEsY0FBY0EsT0FBT0EsRUFBRUEsYUFBYUEsU0FBU0EsRUFBRUEsYUFBYUEsU0FBU0EsSUEzQjNFQSxJQUNBRCxFQUFFRSxRQUFRQyxPQUFPLFdBQ2JGLEtBRUosSUFBSUcsR0FBUUosRUFBRSxvQkFDZEksR0FBTSxHQUFHQyxVQUFZRCxFQUFNLEdBQUdFLGFBRTlCTixFQUFFLFlBQVlPLFNBQVMsUUFBUUMsTUFBTSxTQUFTQyxHQUN6QixJQUFiQSxFQUFFQyxVQUVGTixFQUFNLEdBQUdDLFVBQVlELEVBQU0sR0FBR0UsYUFDOUJOLEVBQUUxSCxNQUFNcUksSUFBSSxPQUVqQkMsVUhmUDdHLElBQUlHLFdBQVcsd0JBQXdCLFNBQVMsUUFBUWQiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbCxudWxsLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi90c0RlZnMuZC50c1wiLz5cblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsWyduZ0FuaW1hdGUnLCduZ0Nvb2tpZXMnLCdsdWVnZy5kaXJlY3RpdmVzJ10pO1xuXG5cblxuXG5cblxuXG4vL2FwcC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSl7XG4vLyAgICAkc2NvcGUuaXR3b3JrcyA9ICdIZWxsbyBXb3JsZCc7XG4vL31dKTtcblxuXG4vL2FwcC5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsJGxvY2F0aW9uUHJvdmlkZXIpe1xuLy8gICAgJHJvdXRlUHJvdmlkZXJcbi8vICAgIC53aGVuKCcvJyx7XG4vLyAgICAgICAgICAgIHRlbXBsYXRlVXJsOid2aWV3cy9ob21lLmh0bWwnLFxuLy8gICAgICAgICAgICBjb250cm9sbGVyOidJbmRleENvbnRyb2xsZXInXG4vLyAgICAgICAgfSk7XG4vL1xuLy8gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuLy99KTtcbiIsbnVsbCwiLyoqXG4gKiBDcmVhdGVkIGJ5IE5pY2sgb24gMTAvMTMvMTUuXG4gKi9cbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vdHNEZWZzLmQudHMnLz5cbiQoZnVuY3Rpb24oKSB7XG4gICAgcmVzaXplTWFpbigpO1xuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcbiAgICAgICAgcmVzaXplTWFpbigpO1xuICAgIH0pO1xuICAgIHZhciAkY29udCA9ICQoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgJGNvbnRbMF0uc2Nyb2xsVG9wID0gJGNvbnRbMF0uc2Nyb2xsSGVpZ2h0O1xuXG4gICAgJCgnLmNoYXRib3gnKS5jaGlsZHJlbignZm9ybScpLmtleXVwKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgLy8kY29udC5hcHBlbmQoJzxwPicgKyAkKHRoaXMpLnZhbCgpICsgJzwvcD4nKTtcbiAgICAgICAgICAgICRjb250WzBdLnNjcm9sbFRvcCA9ICRjb250WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICQodGhpcykudmFsKCcnKTtcbiAgICAgICAgfVxuICAgIH0pLmZvY3VzKCk7XG5cbiAgICAvL3Jlc2l6ZXMgdGhlIGVsZW1lbnRzIHRoYXQgbmVlZCAxMDAlIGhlaWdodFxuICAgIGZ1bmN0aW9uIHJlc2l6ZU1haW4oKXtcbiAgICAgICAgJCgnLm1haW5XcmFwcGVyJykuaGVpZ2h0KCQod2luZG93KS5oZWlnaHQoKSlcbiAgICAgICAgJCgnbWFpbicpLmhlaWdodCgkKCcubWFpbldyYXBwZXInKS5oZWlnaHQoKSk7XG4gICAgICAgICQoJy5jb250ZW50V3JhcHBlcicpLmhlaWdodCgkKCdtYWluJykuaGVpZ2h0KCkpO1xuICAgICAgICAkKCcubGVmdE1lbnUnKS5oZWlnaHQoJCgnLm1haW5XcmFwcGVyJykuaGVpZ2h0KCkpO1xuICAgICAgICAkKCcucmlnaHRTaWRlYmFyJykuaGVpZ2h0KCQoJy5tYWluV3JhcHBlcicpLmhlaWdodCgpKTtcbiAgICAgICAgJCgnLmNoYXRib3gnKS5oZWlnaHQoJCgnLnJpZ2h0U2lkZWJhcicpLmhlaWdodCgpKTtcbiAgICAgICAgJCgnI21lc3NhZ2VDb250YWluZXInKS5oZWlnaHQoJCgnLmNoYXRib3gnKS5oZWlnaHQoKS0kKCcuY2hhdGJveCcpLmNoaWxkcmVuKCdmb3JtJykuaGVpZ2h0KCkpO1xuICAgICAgICAkKCcuU0NSZXN1bHRzJykuaGVpZ2h0KCQoJy5jb250ZW50V3JhcHBlcicpLmhlaWdodCgpLTg1KTtcbiAgICAgICAgJCgnLm1hbmFnZW1lbnQnKS5oZWlnaHQoJCgnLmNvbnRlbnRXcmFwcGVyJykuaGVpZ2h0KCktODUpO1xuICAgICAgICAkKCcudXNlcmdycCcpLmhlaWdodCgkKCcubWFuYWdlbWVudCcpLmhlaWdodCgpKTtcbiAgICAgICAgJCgnLnNvbmdRdWV1ZScpLmhlaWdodCgkKCcubGVmdE1lbnUnKS5oZWlnaHQoKS0kKCcubGVmdEJ0bnMnKS5oZWlnaHQoKS0xMCk7XG4gICAgfVxufSk7XG4vL2NvbnNvbGUubG9nKCdydW5uaW5nIFNDJyk7XG4vL1NDLmluaXRpYWxpemUoe1xuLy8gICAgY2xpZW50X2lkOiAnMmY1ZGY0NjI4Zjg5YmMwNmRjNmY4ODc4OWQ1ZWIwYWUnLFxuLy8gICAgcmVkaXJlY3RfdXJpOiAnaHR0cDovL3RyZWVzcmFkaW8ubmV0L3NvdW5kY2xvdWQvY2FsbGJhY2suaHRtbCdcbi8vfSk7XG4vL2NvbnNvbGUubG9nKCdnZXR0aW5nIHRyYWNrcycpO1xuLy9TQy5nZXQoJy90cmFja3Mva2lkLWN1ZGktbWFyaWp1YW5hJykudGhlbihmdW5jdGlvbih0cmFjayl7XG4vLyAgICBjb25zb2xlLmxvZyh0cmFjayk7XG4vLyAgICBTQy5zdHJlYW0oJy90cmFja3MvJyt0cmFjay5pZCkudGhlbihmdW5jdGlvbiAocGxheWVyKXtcbi8vICAgICAgICBwbGF5ZXIucGxheSgpO1xuLy8gICAgfSk7XG4vL30pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
